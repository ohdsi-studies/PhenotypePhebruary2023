{
  "ExpressionLimit": {"Type": "All"},
  "CollapseSettings": {
    "CollapseType": "ERA",
    "EraPad": 30
  },
  "CensorWindow": {},
  "ConceptSets": [
    {
      "expression": {"items": [
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 762509,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "428241000124101",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis due to human papillomavirus vaccine",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 441202,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "39579001",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis",
            "DOMAIN_ID": "Condition",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 762513,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "428301000124106",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis due to meningococcal vaccine",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 762515,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "428331000124103",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis due to rotavirus vaccine",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 762511,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "428281000124107",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis due to diphtheria and tetanus vaccine",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 762514,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "428321000124101",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Anaphylaxis due to Hepatitis B vaccine",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 4148381,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "35001004",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Non-allergic anaphylaxis",
            "DOMAIN_ID": "Condition",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Clinical Finding",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        }
      ]},
      "name": "All cause Anaphylaxis",
      "id": 2
    },
    {
      "expression": {"items": [
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 9201,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "IP",
            "VOCABULARY_ID": "Visit",
            "CONCEPT_NAME": "Inpatient Visit",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 262,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "ERIP",
            "VOCABULARY_ID": "Visit",
            "CONCEPT_NAME": "Emergency Room and Inpatient Visit",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        }
      ]},
      "name": "Inpatient",
      "id": 3
    },
    {
      "expression": {"items": [{
        "isExcluded": false,
        "concept": {
          "INVALID_REASON_CAPTION": "Valid",
          "CONCEPT_ID": 9203,
          "STANDARD_CONCEPT": "S",
          "CONCEPT_CODE": "ER",
          "VOCABULARY_ID": "Visit",
          "CONCEPT_NAME": "Emergency Room Visit",
          "DOMAIN_ID": "Visit",
          "STANDARD_CONCEPT_CAPTION": "Standard",
          "CONCEPT_CLASS_ID": "Visit",
          "INVALID_REASON": "V"
        },
        "includeMapped": false,
        "includeDescendants": true
      }]},
      "name": "Emergency Room",
      "id": 4
    },
    {
      "expression": {"items": [
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 45890237,
            "STANDARD_CONCEPT": "C",
            "CONCEPT_CODE": "1013711",
            "VOCABULARY_ID": "CPT4",
            "CONCEPT_NAME": "Emergency Department Services",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Classification",
            "CONCEPT_CLASS_ID": "CPT4 Hierarchy",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 4163685,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "4525004",
            "VOCABULARY_ID": "SNOMED",
            "CONCEPT_NAME": "Emergency department patient visit",
            "DOMAIN_ID": "Observation",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Procedure",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        }
      ]},
      "name": "Urgent care concepts",
      "id": 5
    },
    {
      "expression": {"items": [
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 9202,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "OP",
            "VOCABULARY_ID": "Visit",
            "CONCEPT_NAME": "Outpatient Visit",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": true,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 581380,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "OMOP4822041",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Outpatient Critical Care Facility",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": true,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 8756,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "22",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Outpatient Hospital",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": true,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 8782,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "20",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Urgent Care Facility",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        }
      ]},
      "name": "Outpatient visit",
      "id": 7
    },
    {
      "expression": {"items": [
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 38004693,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "70",
            "VOCABULARY_ID": "Medicare Specialty",
            "CONCEPT_NAME": "Clinic or Group Practice",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 38004453,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "8",
            "VOCABULARY_ID": "Medicare Specialty",
            "CONCEPT_NAME": "Family Practice",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 8716,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "49",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Independent Clinic",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 581477,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "OMOP4822458",
            "VOCABULARY_ID": "Visit",
            "CONCEPT_NAME": "Office Visit",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 8977,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "71",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Public Health Clinic",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 8761,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "72",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Rural Health Clinic",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        },
        {
          "isExcluded": false,
          "concept": {
            "INVALID_REASON_CAPTION": "Valid",
            "CONCEPT_ID": 38003620,
            "STANDARD_CONCEPT": "S",
            "CONCEPT_CODE": "17",
            "VOCABULARY_ID": "CMS Place of Service",
            "CONCEPT_NAME": "Walk-in Retail Health Clinic",
            "DOMAIN_ID": "Visit",
            "STANDARD_CONCEPT_CAPTION": "Standard",
            "CONCEPT_CLASS_ID": "Visit",
            "INVALID_REASON": "V"
          },
          "includeMapped": false,
          "includeDescendants": true
        }
      ]},
      "name": "Doctors office",
      "id": 8
    }
  ],
  "EndStrategy": {"DateOffset": {
    "DateField": "EndDate",
    "Offset": 1
  }},
  "cdmVersionRange": ">=5.0.0",
  "CensoringCriteria": [],
  "QualifiedLimit": {"Type": "All"},
  "InclusionRules": [
    {
      "expression": {
        "CriteriaList": [{
          "RestrictVisit": false,
          "StartWindow": {
            "UseEventEnd": false,
            "Start": {
              "Days": 0,
              "Coeff": -1
            },
            "End": {
              "Days": 0,
              "Coeff": 1
            },
            "UseIndexEnd": false
          },
          "IgnoreObservationPeriod": false,
          "Criteria": {"VisitOccurrence": {
            "CodesetId": 7,
            "VisitTypeExclude": false
          }},
          "Occurrence": {
            "Type": 2,
            "IsDistinct": false,
            "Count": 1
          }
        }],
        "Type": "ALL",
        "DemographicCriteriaList": [],
        "Groups": []
      },
      "name": "Should be any non urgent"
    },
    {
      "expression": {
        "CriteriaList": [
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {
                "Days": 0,
                "Coeff": -1
              },
              "End": {
                "Days": 0,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "Criteria": {"VisitOccurrence": {
              "CodesetId": 8,
              "VisitTypeExclude": false
            }},
            "Occurrence": {
              "Type": 2,
              "IsDistinct": false,
              "Count": 1
            }
          },
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {
                "Days": 0,
                "Coeff": -1
              },
              "End": {
                "Days": 0,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "Criteria": {"VisitDetail": {"CodesetId": 8}},
            "Occurrence": {
              "Type": 2,
              "IsDistinct": false,
              "Count": 1
            }
          },
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {
                "Days": 0,
                "Coeff": -1
              },
              "End": {
                "Days": 0,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "Criteria": {"VisitOccurrence": {
              "VisitSourceConcept": 8,
              "VisitTypeExclude": false
            }},
            "Occurrence": {
              "Type": 2,
              "IsDistinct": false,
              "Count": 1
            }
          },
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {
                "Days": 0,
                "Coeff": -1
              },
              "End": {
                "Days": 0,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "Criteria": {"VisitDetail": {"VisitDetailSourceConcept": 8}},
            "Occurrence": {
              "Type": 2,
              "IsDistinct": false,
              "Count": 1
            }
          }
        ],
        "Type": "ANY",
        "DemographicCriteriaList": [],
        "Groups": []
      },
      "name": "Should be TRUE Doctors office"
    },
    {
      "expression": {
        "CriteriaList": [{
          "RestrictVisit": false,
          "StartWindow": {
            "UseEventEnd": false,
            "Start": {"Coeff": -1},
            "End": {
              "Days": 1,
              "Coeff": 1
            },
            "UseIndexEnd": false
          },
          "IgnoreObservationPeriod": false,
          "EndWindow": {
            "UseEventEnd": true,
            "Start": {
              "Days": 1,
              "Coeff": -1
            },
            "End": {"Coeff": 1},
            "UseIndexEnd": false
          },
          "Criteria": {"VisitOccurrence": {
            "CodesetId": 3,
            "VisitTypeExclude": false
          }},
          "Occurrence": {
            "Type": 0,
            "IsDistinct": false,
            "Count": 0
          }
        }],
        "Type": "ALL",
        "DemographicCriteriaList": [],
        "Groups": []
      },
      "name": "Should not be Inpatient"
    },
    {
      "expression": {
        "CriteriaList": [{
          "RestrictVisit": false,
          "StartWindow": {
            "UseEventEnd": false,
            "Start": {"Coeff": -1},
            "End": {
              "Days": 1,
              "Coeff": 1
            },
            "UseIndexEnd": false
          },
          "IgnoreObservationPeriod": false,
          "EndWindow": {
            "UseEventEnd": true,
            "Start": {
              "Days": 1,
              "Coeff": -1
            },
            "End": {"Coeff": 1},
            "UseIndexEnd": false
          },
          "Criteria": {"VisitOccurrence": {
            "CodesetId": 4,
            "VisitTypeExclude": false
          }},
          "Occurrence": {
            "Type": 0,
            "IsDistinct": false,
            "Count": 0
          }
        }],
        "Type": "ALL",
        "DemographicCriteriaList": [],
        "Groups": []
      },
      "name": "Should not be Emergency room"
    },
    {
      "expression": {
        "CriteriaList": [
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {"Coeff": -1},
              "End": {
                "Days": 1,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "EndWindow": {
              "UseEventEnd": true,
              "Start": {
                "Days": 1,
                "Coeff": -1
              },
              "End": {"Coeff": 1},
              "UseIndexEnd": false
            },
            "Criteria": {"Observation": {
              "ObservationTypeExclude": false,
              "CodesetId": 5
            }},
            "Occurrence": {
              "Type": 0,
              "IsDistinct": false,
              "Count": 0
            }
          },
          {
            "RestrictVisit": false,
            "StartWindow": {
              "UseEventEnd": false,
              "Start": {"Coeff": -1},
              "End": {
                "Days": 1,
                "Coeff": 1
              },
              "UseIndexEnd": false
            },
            "IgnoreObservationPeriod": false,
            "EndWindow": {
              "UseEventEnd": true,
              "Start": {
                "Days": 1,
                "Coeff": -1
              },
              "End": {"Coeff": 1},
              "UseIndexEnd": false
            },
            "Criteria": {"ProcedureOccurrence": {
              "CodesetId": 5,
              "ProcedureTypeExclude": false
            }},
            "Occurrence": {
              "Type": 0,
              "IsDistinct": false,
              "Count": 0
            }
          }
        ],
        "Type": "ALL",
        "DemographicCriteriaList": [],
        "Groups": []
      },
      "name": "Should not be Urgent Care"
    }
  ],
  "PrimaryCriteria": {
    "CriteriaList": [
      {"ConditionOccurrence": {
        "ConditionTypeExclude": false,
        "CodesetId": 2
      }},
      {"Observation": {
        "ObservationTypeExclude": false,
        "CodesetId": 2
      }}
    ],
    "PrimaryCriteriaLimit": {"Type": "All"},
    "ObservationWindow": {
      "PostDays": 0,
      "PriorDays": 0
    }
  }
}